{"version":3,"sources":["webpack://dnb-design-system-portal/./src/shared/menu/SidebarMenu.js"],"names":["PortalToolsMenuMedia","PortalToolsMenu","StyledListItem","Navigation","showAlwaysMenuItems","SidebarLayout","props","e","keycode","isOpen","toggleMenu","_scrollRef","React","setPageFocusElement","delayBuff","this","current","window","scrollToLastPosition","onscroll","busySettingNewPos","clearTimeout","setTimeout","localStorage","setItem","target","scrollTop","console","log","document","addEventListener","handleKeyDown","getItem","parseFloat","offsetTop","lastPos","getLastPosition","scrollToActiveItem","elem","querySelector","offset","getBoundingClientRect","top","rect","scrollTo","behavior","removeEventListener","location","showAll","styles","StaticQuery","query","render","allMdx","pathPrefix","site","currentPathname","pathname","replace","currentPathnameList","split","filter","i","nav","prepareNav","title","menuTitle","map","path","active","inside","every","includes","curr","arr","prev","level","nr","status","icon","to","onOffsetTop","ListItem","key","context","isClosing","applyPageFocus","id","aria-labelledby","className","classnames","ref","trigger_text","trigger_icon","trigger_icon_position","left","PropTypes","SidebarMenuContext","children","statusTitle","new","beta","wip","cs","dep","imp","params","style","onClick","resetLevels","graphics","size","createSkeletonClass","skeleton","aria-label","Context","first","prefix","p","navItems","edges","node","fields","slug","sort","reduce","acc","cur","items","find","url","countLevels","levelCache","subCache","list","concat","slugPath","frontmatter","order","rest","length","_order","item","parts","sub","slice","join","count","push","oA","oB"],"mappings":"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","file":"55b8a3da-2cacf58ddb48a596ff45.js","sourcesContent":["/**\n * Sidebar with Menu\n *\n */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport Link from '../parts/Link'\nimport { StaticQuery, graphql } from 'gatsby'\nimport { css, Global } from '@emotion/react'\nimport styled from '@emotion/styled'\nimport { resetLevels } from '@dnb/eufemia/src/components/Heading'\nimport Context from '@dnb/eufemia/src/shared/Context'\nimport { SidebarMenuContext } from './SidebarMenuContext'\nimport { createSkeletonClass } from '@dnb/eufemia/src/components/skeleton/SkeletonHelper'\nimport { Icon } from '@dnb/eufemia/src/components'\nimport graphics from './SidebarGraphics'\nimport keycode from 'keycode'\nimport {\n  setPageFocusElement,\n  applyPageFocus,\n} from '@dnb/eufemia/src/shared/helpers'\nimport PortalToolsMenu from './PortalToolsMenu'\n\nconst PortalToolsMenuMedia = styled(PortalToolsMenu)`\n  @media screen and (min-width: 50em) {\n    display: none;\n  }\n`\n\nconst StyledListItem = styled.li`\n  list-style: none;\n  margin: 0;\n\n  .dnb-anchor {\n    position: relative;\n    padding: 0;\n    height: 2.5rem;\n\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n\n    transform: translateY(1px);\n    color: var(--color-emerald-green);\n    background-color: inherit;\n    font-size: inherit;\n\n    &:hover {\n      color: var(--color-black);\n      background-color: transparent;\n    }\n  }\n\n  .show-mobile-menu & {\n    opacity: 0.3;\n    animation: show-mobile-menu 600ms cubic-bezier(0.19, 1, 0.22, 1) 1\n      var(--delay) forwards;\n  }\n  .hide-mobile-menu & {\n    opacity: 1;\n    animation: hide-mobile-menu 300ms cubic-bezier(0.19, 1, 0.22, 1) 1\n      calc(10ms - var(--delay)) forwards;\n  }\n\n  &:first-of-type {\n    margin-bottom: 1rem;\n    font-size: var(--font-size-large);\n    background-color: transparent;\n  }\n\n  html:not([dev-grid]) & {\n    background-color: var(--color-white);\n  }\n\n  &.l-1 .dnb-anchor {\n    margin-left: var(--level-icon-adjust);\n    padding-left: calc(var(--level-offset) + var(--level) * 2);\n    height: 4rem;\n    color: var(--color-ocean-green);\n    font-weight: var(--font-weight-medium);\n    font-size: var(--font-size-large);\n  }\n  &.l-2 {\n    .dnb-anchor {\n      padding-left: calc(var(--level-offset) + var(--level) * 2);\n      height: 3.5rem;\n\n      .dnb-icon {\n        margin-right: 1rem;\n        margin-left: var(--level-icon-adjust);\n        color: var(--color-black-80);\n      }\n    }\n    &.is-inside {\n      html:not([dev-grid]) & {\n        background-color: var(--color-mint-green-12);\n      }\n      font-weight: var(--font-weight-medium);\n    }\n  }\n\n  &.l-3 {\n    font-size: var(--font-size-small); /* small size */\n    .dnb-anchor {\n      padding-left: calc(var(--level-offset) + var(--level) * 3);\n    }\n    &.is-inside {\n      html:not([dev-grid]) & {\n        background-color: var(--color-sea-green-30);\n      }\n      font-weight: var(--font-weight-medium);\n    }\n  }\n\n  &.l-4 .dnb-anchor {\n    padding-left: calc(var(--level-offset) + var(--level) * 4);\n  }\n  &.l-5 .dnb-anchor {\n    padding-left: calc(var(--level-offset) + var(--level) * 5);\n  }\n  &.l-6 .dnb-anchor {\n    padding-left: calc(var(--level-offset) + var(--level) * 6);\n  }\n\n  &.l-4,\n  &.l-5,\n  &.l-6 {\n    font-size: var(--font-size-small); /* small size */\n    &.is-inside {\n      html:not([dev-grid]) & {\n        background-color: var(--color-mint-green-12);\n      }\n    }\n  }\n\n  &.l-1,\n  &.l-2,\n  &.l-3,\n  &.l-4,\n  &.l-5,\n  &.l-6 {\n    &.is-active {\n      html:not([dev-grid]) & {\n        background-color: var(--color-mint-green-50);\n      }\n    }\n  }\n\n  .dnb-anchor:focus:not(:active) {\n    color: var(--color-white);\n    svg {\n      color: var(--color-white);\n    }\n    background-color: var(--color-emerald-green);\n  }\n\n  @keyframes show-mobile-menu {\n    0% {\n      opacity: 0.3;\n      transform: translate3d(0, -20%, 0);\n    }\n    40% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 1;\n      transform: translate3d(0, 0, 0);\n    }\n  }\n\n  @keyframes hide-mobile-menu {\n    0% {\n      opacity: 1;\n      transform: translate3d(0, 0, 0);\n    }\n    60% {\n      opacity: 0.5;\n      transform: translate3d(0, 0, 0);\n    }\n    100% {\n      opacity: 0.3;\n      transform: translate3d(0, -20%, 0);\n    }\n  }\n\n  .status-badge {\n    margin-right: 1rem;\n\n    display: flex;\n    justify-content: center;\n    align-items: baseline; /* then we can set line-height */\n\n    font-size: 0.4375rem; /* safari handles rem value incorrectly */\n    line-height: 1.3125rem; /* same as height + 1px */\n    font-weight: var(--font-weight-basis);\n    text-align: center;\n    text-transform: uppercase;\n    color: var(--color-black);\n\n    /* bg */\n    height: 1.25rem;\n    width: 1.25rem;\n    border-radius: 50%;\n\n    background-color: var(--color-mint-green-25);\n    &::after {\n      content: '';\n      position: absolute;\n      z-index: 1;\n    }\n  }\n  &.status-dep .status-badge {\n    color: var(--color-black-80);\n    background-color: var(--color-fire-red-8);\n  }\n  &.status-new .status-badge {\n    color: var(--color-sea-green);\n    background-color: transparent;\n  }\n  &.status-beta .status-badge {\n    color: var(--color-fire-red);\n    background-color: transparent;\n  }\n  &.status-imp .status-badge {\n    background-color: var(--color-black);\n    color: var(--color-white);\n  }\n`\n\nconst Navigation = styled.nav`\n  position: fixed;\n\n  /* lower than styled.main */\n  z-index: 1;\n\n  /* height of StickyMenuBar */\n  height: calc(100vh - 4rem);\n  margin: 4rem 0 0;\n\n  /* make the sidebar scrollable */\n  overflow-x: hidden;\n  overflow-y: auto;\n  overscroll-behavior: contain;\n  -ms-overflow-style: none;\n\n  /* make the sidemenu accessible for screen readers on mobile devices  */\n  @media screen and (max-width: 50em) {\n    position: relative;\n    height: auto;\n    overflow: auto;\n  }\n\n  background-color: var(--color-white);\n\n  ul {\n    /* some air we need */\n    padding: 2rem 0 1rem;\n\n    /* has to be the same value as margin-left */\n    width: 30vw;\n    width: var(--aside-width);\n  }\n\n  /*\n    God for a mobile menu instead\n    make sure that Content main \"styled.main\" gets the same max-width\n  */\n  @media screen and (max-width: 50em) {\n    &:not(.show-mobile-menu) {\n      display: none;\n    }\n  }\n\n  @media screen and (max-width: 50em) {\n    position: relative;\n    ul {\n      width: 100vw;\n      max-height: none;\n      overflow-y: visible;\n    }\n  }\n\n  .main-menu-toggle {\n    margin-left: var(--level-offset);\n\n    .dnb-icon:nth-of-type(1) {\n      color: var(--color-sea-green);\n      margin-right: 0.5rem;\n\n      &.dnb-icon--small {\n        margin-left: 0.5rem;\n      }\n    }\n\n    &.dnb-button__text {\n      color: var(--color-sea-green);\n    }\n    &.dnb-button:hover {\n      color: var(--color-black);\n      .dnb-button__text,\n      .dnb-icon {\n        color: inherit;\n      }\n    }\n\n    margin-top: 1rem;\n    margin-bottom: 2rem;\n  }\n`\n\nconst showAlwaysMenuItems = [] // like \"uilib\" something like that\n\nexport default class SidebarLayout extends React.PureComponent {\n  static propTypes = {\n    location: PropTypes.object.isRequired,\n    showAll: PropTypes.bool,\n  }\n  static defaultProps = {\n    showAll: false,\n  }\n  static contextType = SidebarMenuContext\n\n  constructor(props) {\n    super(props)\n    this._scrollRef = React.createRef()\n    setPageFocusElement('nav ul li.is-active a:nth-of-type(1)', 'sidebar')\n  }\n\n  componentDidMount() {\n    // remember last scroll position\n    if (this._scrollRef.current) {\n      if (typeof window !== 'undefined') {\n        let delayBuff\n        this.scrollToLastPosition()\n\n        this._scrollRef.current.onscroll = (e) => {\n          if (this.busySettingNewPos) return\n          clearTimeout(delayBuff)\n          delayBuff = setTimeout(() => {\n            try {\n              window.localStorage.setItem('sidebarPos', e.target.scrollTop)\n            } catch (e) {\n              console.log('SidebarLayout error:', e)\n            }\n          }, 100)\n        }\n      }\n    }\n\n    if (typeof document !== 'undefined') {\n      document.addEventListener('keydown', this.handleKeyDown)\n    }\n  }\n\n  getLastPosition() {\n    if (typeof window !== 'undefined') {\n      try {\n        return window.localStorage.getItem('sidebarPos')\n          ? parseFloat(window.localStorage.getItem('sidebarPos'))\n          : this.offsetTop\n      } catch (e) {\n        return 0\n      }\n    }\n  }\n\n  scrollToLastPosition() {\n    if (this._scrollRef.current) {\n      this.busySettingNewPos = true\n      const lastPos = this.getLastPosition()\n      if (lastPos > 0) {\n        this._scrollRef.current.scrollTop = lastPos\n      } else {\n        this.scrollToActiveItem()\n      }\n      setTimeout(() => {\n        this.busySettingNewPos = false\n      }, 10)\n    }\n  }\n\n  scrollToActiveItem() {\n    if (this._scrollRef.current) {\n      const elem = this._scrollRef.current.querySelector('li.is-active')\n      if (!elem) {\n        return false\n      }\n      try {\n        const offset = this._scrollRef.current.getBoundingClientRect().top\n        const rect = elem.getBoundingClientRect()\n        const top = this._scrollRef.current.scrollTop + rect.top - offset\n        if (window.scrollTo) {\n          window.scrollTo({\n            top,\n            behavior: 'smooth',\n          })\n        } else {\n          window.scrollTop = top\n        }\n      } catch (e) {\n        console.log('Could not set scrollToActiveItem', e)\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n  handleKeyDown = (e) => {\n    switch (keycode(e)) {\n      case 'esc':\n        if (this.isOpen) {\n          this.toggleMenu()\n        }\n        break\n    }\n  }\n\n  render() {\n    const { location, showAll = false } = this.props\n\n    return (\n      <>\n        <Global\n          styles={css`\n            :root {\n              --level-offset: 3vw;\n              @media screen and (max-width: 50em) {\n                --level-offset: 2rem;\n              }\n\n              --delay: 0; /* polyfill fallback */\n\n              /* stylelint-disable */\n              --aside-width: 30vw; /* IE fix */\n              --aside-width: calc(25vw + 5rem);\n              /* stylelint-enable */\n\n              /* 2.5rem - but we don't want it to be responsive */\n              --level-icon-adjust: -40px;\n              --level: 2vw;\n\n              @media screen and (max-width: 50em) {\n                --level: 1.3rem;\n              }\n            }\n          `}\n        />\n        <StaticQuery\n          query={graphql`\n            query {\n              site {\n                pathPrefix\n              }\n              allMdx(\n                # limit: 2\n                # sort: { fields: [frontmatter___order], order: ASC }\n                filter: {\n                  frontmatter: { title: { ne: null }, draft: { ne: true } }\n                }\n              ) {\n                edges {\n                  node {\n                    fields {\n                      slug\n                    }\n                    frontmatter {\n                      title\n                      menuTitle\n                      order\n                      status\n                      icon\n                    }\n                  }\n                }\n              }\n            }\n          `}\n          render={({ allMdx, site: { pathPrefix } }) => {\n            const currentPathname = location.pathname.replace(/(\\/)$/, '')\n            const currentPathnameList = currentPathname\n              .split('/')\n              .filter((i) => i)\n\n            const nav = prepareNav({\n              location,\n              allMdx,\n              showAll,\n              pathPrefix,\n            })\n              .filter(({ title, menuTitle }) => title || menuTitle)\n\n              .map((props) => {\n                const path = `/${props.path}`\n\n                // get the active item\n                const active =\n                  currentPathname === path ||\n                  currentPathname === path.replace(/(\\/)$/, '')\n\n                // check if a item path is inside another\n                const inside = path\n                  .split('/')\n                  .filter((i) => i)\n                  .every((i) => currentPathnameList.includes(i))\n\n                return { ...props, active, inside }\n              })\n\n              // mark also the rest of the same level as inside\n              .map((curr, i, arr) => {\n                const prev = arr[i - 1] ? arr[i - 1] : null\n                if (prev && curr.level >= 4) {\n                  if (prev.inside && curr.level >= prev.level) {\n                    curr.inside = true\n                  }\n                }\n                return curr\n              })\n              .map(\n                (\n                  {\n                    title,\n                    menuTitle,\n                    status,\n                    icon,\n                    path,\n                    level,\n                    active,\n                    inside,\n                  },\n                  nr\n                ) => {\n                  const props = {\n                    level,\n                    nr,\n                    status,\n                    icon,\n                    active,\n                    inside,\n                    to: path,\n                    onOffsetTop: (offsetTop) =>\n                      (this.offsetTop = offsetTop),\n                  }\n\n                  return (\n                    <ListItem key={path} {...props}>\n                      {menuTitle || title}\n                    </ListItem>\n                  )\n                }\n              )\n\n            const { isOpen, isClosing, toggleMenu } = this.context\n\n            this.isOpen = isOpen\n            this.toggleMenu = toggleMenu\n            if (isOpen && !isClosing) {\n              setTimeout(() => {\n                this.scrollToActiveItem()\n                applyPageFocus('sidebar')\n              }, 300) // after animation is done\n            } else if (isClosing) {\n              setTimeout(() => {\n                applyPageFocus('content')\n              }, 300) // after animation is done - to make sure we can get the focus on h1\n            }\n\n            return (\n              <>\n                <Navigation\n                  id=\"portal-sidebar-menu\"\n                  aria-labelledby=\"toggle-sidebar-menu\"\n                  className={classnames(\n                    'dnb-scrollbar-appearance',\n                    isOpen && 'show-mobile-menu',\n                    isClosing && 'hide-mobile-menu'\n                  )}\n                  ref={this._scrollRef}\n                >\n                  <PortalToolsMenuMedia\n                    trigger_text=\"Portal Tools\"\n                    trigger_icon=\"chevron_right\"\n                    trigger_icon_position=\"right\"\n                    left=\"large\"\n                    top=\"large\"\n                  />\n                  <ul className=\"dev-grid\">{nav}</ul>\n                  {isOpen && (\n                    <Global\n                      styles={css`\n                        .dnb-app-content {\n                          display: none !important;\n                        }\n                      `}\n                    />\n                  )}\n                </Navigation>\n              </>\n            )\n          }}\n        />\n      </>\n    )\n  }\n}\n\nclass ListItem extends React.PureComponent {\n  static contextType = Context\n\n  static propTypes = {\n    onOffsetTop: PropTypes.func,\n    children: PropTypes.node.isRequired,\n    className: PropTypes.string,\n    to: PropTypes.string.isRequired,\n    level: PropTypes.number,\n    nr: PropTypes.number,\n    status: PropTypes.string,\n    icon: PropTypes.string,\n    active: PropTypes.bool,\n    inside: PropTypes.bool,\n  }\n  static defaultProps = {\n    className: null,\n    active: false,\n    inside: false,\n    level: 0,\n    nr: null,\n    status: null,\n    icon: null,\n    onOffsetTop: null,\n  }\n\n  constructor(props) {\n    super(props)\n    this.ref = React.createRef()\n  }\n  componentDidMount() {\n    if (this.props.active && this.ref.current) {\n      this.props.onOffsetTop(this.ref.current.offsetTop)\n    }\n  }\n\n  render() {\n    const {\n      className,\n      active,\n      inside,\n      to,\n      level,\n      nr,\n      status,\n      icon,\n      children,\n    } = this.props\n\n    const statusTitle =\n      status &&\n      {\n        new: 'New',\n        beta: 'Beta',\n        wip: 'Work in Progress',\n        cs: 'Coming soon',\n        dep: 'Deprecated',\n        imp: 'Needs improvement',\n      }[status]\n\n    const params = {}\n    if (active) {\n      params['aria-current'] = true\n    }\n\n    return (\n      <StyledListItem\n        className={classnames(\n          `l-${level}`,\n          active && 'is-active', // use anchor hover style\n          inside && 'is-inside',\n          status ? `status-${status}` : null,\n          className\n        )}\n        ref={this.ref}\n        style={{\n          '--delay': `${\n            nr !== null && nr < 20 ? nr * 12 : 0 // random(1, 160)\n          }ms`,\n        }}\n      >\n        <Link\n          to={to}\n          onClick={() => {\n            resetLevels(1)\n          }}\n          className={classnames(\n            'dnb-anchor',\n            'dnb-anchor--no-underline',\n            'dnb-anchor--no-radius',\n            'dnb-anchor--no-hover',\n            icon && graphics[icon] ? 'has-icon' : null\n          )}\n          {...params}\n        >\n          <span>\n            {icon && graphics[icon] && (\n              <Icon icon={graphics[icon]} size=\"medium\" />\n            )}\n            <span\n              className={classnames(\n                createSkeletonClass('font', this.context.skeleton)\n              )}\n            >\n              {children}\n            </span>\n          </span>\n          {status && (\n            <span\n              className={classnames(\n                'status-badge',\n                createSkeletonClass('font', this.context.skeleton)\n              )}\n              title={statusTitle}\n              aria-label={statusTitle}\n            >\n              {status}\n            </span>\n          )}\n        </Link>\n      </StyledListItem>\n    )\n  }\n}\n\nconst prepareNav = ({ location, allMdx, showAll, pathPrefix }) => {\n  const pathname = location.pathname.replace(/(\\/)$/, '')\n  let first = null\n  if (showAll === false) {\n    const prefix = pathPrefix ? pathPrefix.replace(/^(\\/)/, '') : null\n    first = pathname.split('/').filter((p) => p && p !== prefix)[0]\n  }\n\n  const navItems = allMdx.edges\n    .map(\n      ({\n        node: {\n          fields: { slug },\n        },\n      }) => slug\n    )\n    .filter((slug) => slug !== '/')\n    // preorder\n    .sort()\n    .reduce(\n      (acc, cur) => {\n        const prefix = cur.split('/').filter((p) => p)[0]\n\n        if (showAll === false) {\n          if (prefix === first) {\n            return { ...acc, items: [...acc.items, cur] }\n          } else {\n            return { ...acc, [cur]: [cur] }\n          }\n        } else {\n          if (showAlwaysMenuItems.find((url) => url === cur)) {\n            return { ...acc, [cur]: [cur] }\n          }\n\n          if (\n            prefix &&\n            showAlwaysMenuItems.find((url) => url === `/${prefix}`)\n          ) {\n            return {\n              ...acc,\n              [`/${prefix}`]: [...acc[`/${prefix}`], cur],\n            }\n          } else {\n            return { ...acc, items: [...acc.items, cur] }\n          }\n        }\n      },\n      { items: [] }\n    )\n\n  let countLevels = 0\n  const levelCache = {},\n    subCache = {}\n\n  const list = showAlwaysMenuItems\n    .reduce((acc, cur) => acc.concat(navItems[cur]), []) // put in the sub parts\n    .concat(navItems.items) // put inn the main parts\n    // make items\n    .map((slugPath) => {\n      const {\n        node: {\n          fields: { slug },\n          frontmatter: { title, order, ...rest },\n        },\n      } = allMdx.edges.find(\n        ({\n          node: {\n            fields: { slug },\n          },\n        }) => slug === slugPath\n      )\n\n      const level = slug.split('/').filter((p) => p).length\n      level > countLevels ? (countLevels = level) : countLevels\n\n      return { title, path: slug, level, order, _order: slug, ...rest }\n    })\n\n    // prepare items, make sure we forward order for sub paths, if needed\n    .map((item) => {\n      const parts = item.path.split('/').filter((p) => p)\n      const sub = parts.slice(0, parts.length - 1).join('/')\n\n      subCache[sub] = subCache[sub] || {\n        count: 1,\n      }\n      levelCache[item.level] = levelCache[item.level] || {}\n      const count = subCache[sub].count++\n\n      item._order = parts\n        .reduce((acc, cur, i) => {\n          if (!levelCache[item.level][cur]) {\n            levelCache[item.level][cur] = item.order\n              ? parseFloat(item.order) + 1000 // push manual ordering to the top\n              : count\n          }\n          if (levelCache[i + 1]) {\n            acc.push(levelCache[i + 1][cur])\n          }\n          return acc\n        }, [])\n        .join('/')\n\n      return item\n    })\n\n  list\n    // reorder regarding potential manually defined order\n    .sort(({ _order: oA }, { _order: oB }) =>\n      oA < oB ? -1 : oA > oB ? 1 : 0\n    )\n  return list\n}\n\n// const random = (min, max) =>\n//   Math.floor(Math.random() * (max - min + 1) + min)\n"],"sourceRoot":""}