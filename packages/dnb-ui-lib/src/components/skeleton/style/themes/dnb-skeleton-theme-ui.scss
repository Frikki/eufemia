/*
 * Skeleton Theme
 *
 */

:root {
  --skeleton-color: var(--color-black-8);
  --skeleton-color--contrast: var(--color-white);

  // Nice color as well. But very colorful!
  // --skeleton-color: var(
  //   --color-sea-green-30
  // ) !important; // to take presence

  // Using a so called DNB background color, could quickly cause conflicts
  // --skeleton-color: var(--color-lavender) !important; // to take presence
  // --skeleton-color: var(--color-pistachio) !important; // to take presence
}

.dnb-skeleton {
  &::before {
    background-color: var(--skeleton-color) !important; // to take presence
  }

  // Lines
  &::after,
  &--lines &::after,
  &--lines#{&}::after {
    background-image: repeating-linear-gradient(
      -45deg,
      var(--skeleton-color--contrast) 0 1px,
      transparent 0 6px
    ) !important;
    background-repeat: repeat !important;
    background-size: 100% !important; // to take presence

    animation: skeletonLinearAnimation 2s linear infinite;

    // For better performance
    // animation: skeletonShineAnimation 2s linear infinite;
  }

  // Dots
  // &::after,
  &--dots &::after,
  &--dots#{&}::after {
    background-image: radial-gradient(
      circle,
      var(--skeleton-color--contrast) 1px,
      transparent 1px /* Having 2px makes it add lookin in Safari */
    ) !important; // to take presence
    background-position-y: 50% !important;
    background-repeat: repeat !important;
    background-size: 5px 5px !important; // to take presence

    animation: skeletonLinearAnimation 2s linear infinite;
  }

  // Shine
  &--shine &::after,
  &--shine#{&}::after {
    background-image: linear-gradient(
      90deg,
      transparent 10%,
      var(--skeleton-color--contrast) 60%,
      transparent 85%
    ) !important;
    background-position-y: 50% !important;
    background-repeat: no-repeat !important;
    background-size: 100% 100% !important;

    animation: skeletonShineAnimation 2s linear infinite;
  }

  // Nicer animation, but requires an hidden overflow
  &--overflow {
    overflow: hidden;
  }
  // &--overflow &::after {
  //   animation: skeletonOverflowAnimation 2s linear infinite;
  // }

  // &--fancy &::after {
  // animation: skeletonFancyAnimation 2s linear infinite;
  // }
}

@keyframes skeletonLinearAnimation {
  0% {
    clip-path: polygon(0 0, 0% 0, 0% 100%, 0 100%);
  }
  50% {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
  100% {
    clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%);
  }
}

@keyframes skeletonFancyAnimation {
  0% {
    transform: translate3d(-100%, 0, 0);
    clip-path: polygon(0 0, 20% 0, 20% 100%, 0 100%);
  }
  60% {
    transform: translate3d(0%, 0, 0);
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }
  100% {
    transform: translate3d(50%, 0, 0);
    clip-path: polygon(50% 0, 50% 0, 50% 100%, 50% 100%);
  }
}

@keyframes skeletonShineAnimation {
  0% {
    opacity: 0.2;
    transform: translate3d(-120%, 0, 0);
  }
  70% {
    opacity: 1;
    transform: translate3d(-10%, 0, 0);
  }
  100% {
    opacity: 0;
    transform: translate3d(20%, 0, 0);
  }
}

// @keyframes skeletonOverflowAnimation {
//   0% {
//     transform: translate3d(-100%, 0, 0);
//   }
//   50% {
//     transform: translate3d(0%, 0, 0);
//   }
//   100% {
//     transform: translate3d(100%, 0, 0);
//   }
// }
